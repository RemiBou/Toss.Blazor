@page "/toss/{TossId}"
@inject IHttpApiClientRequestBuilderFactory httpBuilder
@inject IMarkdownService markdown
@inject IJsInterop JsInterop
@layout MainLayout
<div class="toss-detail">
    @if (tossDetail != null)
    {
        <h1>

            @tossDetail.UserName -
            @tossDetail.CreatedOn.ToString("f")
            <div class="tags">
                @foreach (var hashTag in tossDetail.Hashtags)
                {

                    <a class="link-button" href="@("/tag/"+hashTag)">
                        #@hashTag
                    </a>
                }
            </div>
        </h1>
        <div class="toss-content">
            @markdown.ToHtml(tossDetail.Content)
        </div>

    }
</div>
@functions{
    [Parameter]
    protected string TossId { get; set; }
    private TossDetail tossDetail
    {
        get;
        set;
    }

    protected override async Task OnParametersSetAsync()
    {
        await httpBuilder.Create("/api/toss/detail/" + TossId)
              .OnOK<TossDetail>(r =>
             {
                 this.tossDetail = r;
                 StateHasChanged();
             })
              .Get();

    }

}
